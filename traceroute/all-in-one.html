<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>traceroute</title>



    <script type="text/javascript" src="afterglow.min.js"></script>

   

    <style type="text/css">
        body {
            text-align: left;
            margin: 0px auto;
            padding: 20px;
            color: #202020;
            font-size: 13px;
        }
        a {
            color: #202020;
        }
        p {
            font-family: monospace;
            text-align: left;
            padding: 10px 0px;
        }
        
        .bold {
            font-weight: 700;
        }
        .italic {
            font-style: italic;
        }
        .screen{
            background-color: black;
            color: white;
            padding: 25px;
            border: 10px solid white;
            margin: 25px;
            font-family: "Courier New";
            font-size: 20px;
            display: inline-block;
        }




.vjs-afterglow-skin.afterglow-skin-light .vjs-control-bar {
    background-color: rgba(255, 255, 255, 0.9);
    bottom: 0;
    height: 1px;
}

.vjs-afterglow-skin.vjs-has-started .vjs-control-bar {
    display: block;
    opacity: 0.3;
    transition: visibility 0.1s ease 0s, opacity 0.1s ease 0s;
    visibility: visible;
}

.vjs-afterglow-skin.afterglow-skin-light .vjs-top-control-bar .vjs-button {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 50px;
    height: 32px;
    margin-left: 7px;
    width: 32px;
    opacity: 0.3;
}


    </style>

<!-- <script src="//cdn.sc.gl/videojs-hotkeys/0.2/videojs.hotkeys.min.js"></script> -->

</head>

<body>
    LastUpdate 2017 01 31 00:52 by Seamus Murray
    <br>
    <br>

    <h1>DRAFT</h1>
    <br> TODO
    <br> Create a static diagram that shows that routers have more than one IP address.
    <br>Use it of some one asks. To aid the clarity and to fit the presentation into the allotted time frame I had to take some liberties with omitting various elements that were not directly relevant to the messages that I am attempting to covey
    <br> Create some static slides to use at the end of the session to give an overview of what was covered.
     <br> Rename all of the files including the source files to make it easier in the future to edit and add content.
     <br> Create 3 separate html pages. 
    <p></p>
     
    <br> Introduction

    <br> The purpose of this presentation is to clarify some of the concepts and also to correct some of the common misconceptions about traceroute and its related tools.
    <br> This talk is not geared towards educating experienced network administrators on how routing works.
    <br> The presentation will take approximately 45-60 minutes
    <br> I will use numerous animations to illustrate the various concepts.
    <br> Throughout all of the examples we will be using 2 hosts.
    <br> One of the left hand side of the screen and one on the right hand side.
    <br> All of the traceroutes will be initiated from the host on the left.
    <br> During the session I will cover the following topics.
    <br>
    <ol>
        <li>Routers and Route Tables</li>
        <li>TTL (Time to Live) </li>
        <li>ICMP Time Exceeded messages</li>
        <li>How traceroute utilises the TTL and ICMP TTL Exceeded messages to determine the path to a remote network node</li>
        <li>3 common types of traceroutes - ICMP, UDP and TCP</li>
        <li>The primary function of routers</li>
        <li>Secondary functions of routers</li>
        <li>How the limitations and priorities of routers affect the outputs/reports displayed in traceroute tools</li>
        <li>Routing Paths: Asymmetric paths, divergent paths</li>
        <li>How Asymmetric and divergent paths affect the outputs/reports displayed in traceroute tools</li>
    </ol>


    The IP addresses used in the following demonstration are not important, I have merely added them to aid the understanding.



    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">

    <video class="afterglow" 
           id="reason_for_ttl-all-good-just-two-hosts-no-routers" width="960"  height="272" data-skin="light"
                            poster="videos/reason_for_ttl-all-good-just-two-hosts-no-routers.png">
      <source type="video/ogg" src="videos/reason_for_ttl-all-good-just-two-hosts-no-routers.ogg" />
      <source type="video/mp4" src="videos/reason_for_ttl-all-good-just-two-hosts-no-routers.mp4" />
    </video>
        <br>
        <br>There are 2 hosts..
        <br> On the left we have 192.168.0.10
        <br> On the right we have 10.10.0.10
        <br>
reason_for_ttl-all-good-just-two-hosts-no-routers.mp4
    </div>

    
    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">

    <video class="afterglow" id="reason_for_ttl-all-good-two-hosts-two-routers-no-routetable" width="960"  height="272" data-skin="light" 
                            poster="videos/reason_for_ttl-all-good-two-hosts-two-routers-no-routetable.png">
      <source type="video/ogg" src="videos/reason_for_ttl-all-good-two-hosts-two-routers-no-routetable.ogg" />
      <source type="video/mp4" src="videos/reason_for_ttl-all-good-two-hosts-two-routers-no-routetable.mp4" />
    </video>
        <br>
        <br>In this example we have 2 routers between the 2 hosts.
        <br>
reason_for_ttl-all-good-two-hosts-two-routers-no-routetable.mp4
    </div>





    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">

    <video class="afterglow" id="reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables" width="960"  height="272" data-skin="light"
                            poster="videos/reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables.png">
      <source type="video/ogg" src="videos/reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables.ogg" />
      <source type="video/mp4" src="videos/reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables.mp4" />
    </video>
        <br>
        <br> In this example router A has a route entry that states that traffic destined to the 10.10.0.0 network should be sent to Router B.
        <br> However router B has a route entry that states that traffic destined to the 10.10.0.0 network should be sent to Router A.
        <br>
reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">

    <video class="afterglow" id="reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables-icmp-ttl-exceeded" width="960"  height="272" data-skin="light"
                            poster="videos/reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables-icmp-ttl-exceeded.png">
      <source type="video/ogg" src="videos/reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables-icmp-ttl-exceeded.ogg" />
      <source type="video/mp4" src="videos/reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables-icmp-ttl-exceeded.mp4" />
    </video>
        <br>
        <br>To prevent packets from being forwarded indefinitely, each packet is assigned a TTL by the source node that generates the packet, each time the packet is forwarded though router the value of the TTL is decremented by 1.
        <br> Routers will not forward packets if their TTL has expired, ideally routers should send a message back to the source host notifying it that the TTL was exceeded. This message is sent in an ICMP TTL Exceeded packet.
        <br>
reason_for_ttl-routing-loop-two-hosts-two-routers-with-route-tables-icmp-ttl-exceeded.mp4

    </div>



    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">

    <video class="afterglow" id="reason_for_ttl_traceroute_ttl_all" width="960" height="440" data-skin="light"
                            poster="videos/reason_for_ttl_traceroute_ttl_all_3.png">
      <source type="video/ogg" src="videos/reason_for_ttl_traceroute_ttl_all_3.ogg" />
      <source type="video/mp4" src="videos/reason_for_ttl_traceroute_ttl_all_3.mp4" />
    </video>
        <br>
        <br>Traceroute artificially sets the TTL on the outgoing packets so that the TLL will be exceeded on the intermediary routers.
        <br> Traceroute then uses the ICMP TTL Exceeded messages to determine the routers IP address.
        <br> The latency displayed in traceroute is the time difference between when it sent out a particular packet and it receives the ICMP TTL Exceeded message for that particular packet.
        <br>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; 2.0 ms
            <br> 2 &nbsp; 10.10.10.1 &nbsp; &nbsp;4.0 ms
            <br> 3 &nbsp; 10.10.0.10 &nbsp; &nbsp;6.0 ms
            <br>
        </div>
        <br>
reason_for_ttl_traceroute_ttl_all_3.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        This is an overview of what just happened in the previous animation.

    <video class="afterglow" id="traceroute-arrows" width="960" height="360" data-skin="light"
                            poster="videos/traceroute-arrows.png">
      <source type="video/ogg" src="videos/traceroute-arrows.ogg" />
      <source type="video/mp4" src="videos/traceroute-arrows.mp4" />
    </video>
       videos/traceroute-arrows.mp4 
        <br>
        <br>
        <img src="images/key-full.png" width="960">
    </div>





    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In This example a packet is routed / passed though the router.
        <ol>
            <li>The source computer 192.168.0.10 generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The packet arrives at the router with a destination of 10.10.0.10</li>
            <li>The router decrements the TTL by 1</li>
            <li>The router forwards the packet to the destination computer 10.10.0.10</li>
            <li>The destination computer sends the reply to the source computer 192.168.0.10</li>
        </ol>

    <video class="afterglow" id="1_router_pass_through" width="640" height="540" data-skin="light"
                            poster="videos/1_router_pass-through.png">
      <source type="video/ogg" src="videos/1_router_pass-through.ogg" />
      <source type="video/mp4" src="videos/1_router_pass-through.mp4" />
    </video>

        <br>
        <br>
1_router_pass-through.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example the computer on the left is performing a traceroute to the computer on the right (10.10.0.10)..
        <ol>
            <li>The source computer 192.168.0.10 generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The packet arrives at the router with a destination of 10.10.0.10 </li>
            <li>The router decrements the TTL by 1</li>
            <li>The packet has now expired on the router</li>
            <li>The router generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0) message</li>
            <li>The message will have the routers IP address as the source address</li>
            <li>The router sends the message back to the original source IP 192.168.0.10
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The 2nd packet arrives at the router 1 with a destination of 10.10.0.10 </li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>Router 1 forwards the packet to the computer on the right (10.10.0.10)
                <br>
                <br>
            </li>

            <li>The computer on the right (10.10.0.10) sends the reply to the source computer.</li>
        </ol>
        
    <video class="afterglow" id="1_router_ideal_situation" width="640" height="540" data-skin="light" 
                            poster="videos/1_router_ideal-situation.png">
      <source type="video/ogg" src="videos/1_router_ideal-situation.ogg" />
      <source type="video/mp4" src="videos/1_router_ideal-situation.mp4" />
    </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; 2.0 ms
            <br> 2 &nbsp; 10.10.0.10 &nbsp; &nbsp;4.0 ms
            <br>
        </div>
1_router_ideal_situation.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example we have 2 routers between the source computer and the destination computer.
        <ol>
            <li>The source computer generates and sends a packet with the TTL set to 1 and a destination IP address of 10.10.0.10</li>
            <li>The 1st packet arrives at the router 1 with a destination of 10.10.0.10</li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>The 1st packet has now expired on router 1</li>
            <li>Router 1 generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0)</li>
            <li>The message will have the router 1 IP addess as the source address</li>
            <li>Router 1 sends the message back to the original source IP 192.168.0.10
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The 2nd packet arrives at the router 1 with a destination of 10.10.0.10 </li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>Router 1 forwards the packet to router 2</li>
            <li>Router 2 decrements the TTL by 1</li>
            <li>The 2nd packet has now expired on router 2</li>
            <li>Router 2 generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0)</li>
            <li>The message will have the routers 2 IP address as the source address</li>
            <li>Router 2 sends the message back to the original source IP
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 3 and a destination IP address of 10.10.0.10</li>
            <li>The 3rd packet arrives at router 1, TTL -1, forwarded to router 2, TTL -1, forwarded to destination computer 10.10.0.10</li>
            <li>The destination computer sends the reply to the source computer 192.168.0.10</li>
        </ol>
    <video class="afterglow" id="2_routers_ideal-situation" height="540" width="960"  data-skin="light" 
                            poster="videos/2_routers_ideal-situation.png">
      <source type="video/ogg" src="videos/2_routers_ideal-situation.ogg" />
      <source type="video/mp4" src="videos/2_routers_ideal-situation.mp4" />
    </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; 2.0 ms
            <br> 2 &nbsp; 10.10.10.1 &nbsp; &nbsp;4.0 ms
            <br> 3 &nbsp; 10.10.0.10 &nbsp; &nbsp;6.0 ms
            <br>
        </div>
2_routers_ideal-situation.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example there is latency induced by the single router...
        <br> Each packet that is sent though router 1 is delayed.
        <br> The traceroute results are similar to the previous example except for the value of the router 1 delay is added to each query.
        <br>

    <video class="afterglow" id="1_router_slow_fastplane" height="540" width="640"  data-skin="light" 
                            poster="videos/1_router_slow-fastplane.png">
      <source type="video/ogg" src="videos/1_router_slow-fastplane.ogg" />
      <source type="video/mp4" src="videos/1_router_slow-fastplane.mp4" />
    </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; &nbsp;15.0 ms
            <br> 2 &nbsp; 10.10.0.10 &nbsp; &nbsp; 17.0 ms
            <br>
        </div>
videos/1_router_slow_fastplane.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example there is latency induced by router 1...
        <br> Each packet that is sent though router 1 is delayed.
        <br> The traceroute results are similar to the previous example except for the value of the router 1 delay is added to each query.
        <br>
    <video class="afterglow" id="2_routers_latency-induced-by-the-fast-plane-of-first-router" height="540" width="960"  data-skin="light"
                            poster="videos/2_routers_latency-induced-by-the-fast-plane-of-first-router.png">
      <source type="video/ogg" src="videos/2_routers_latency-induced-by-the-fast-plane-of-first-router.ogg" />
      <source type="video/mp4" src="videos/2_routers_latency-induced-by-the-fast-plane-of-first-router.mp4" />
    </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; 12.0 ms
            <br> 2 &nbsp; 10.10.10.1 &nbsp; &nbsp;14.0 ms
            <br> 3 &nbsp; 10.10.0.10 &nbsp; &nbsp;16.0 ms
            <br>
        </div>
2_routers_latency-induced-by-the-fast-plane-of-first-router
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example router drops expired packets but still routes the non expired packets...
        <ol>
            <li>The source computer generates and sends a packet with the TTL set to 1 and a destination IP address of 10.10.0.10</li>
            <li>The 1st packet arrives at the router 1 with a destination of 10.10.0.10</li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>The 1st packet has now expired on router 1</li>
            <li>The control plane of Router 1 is too busy to generate and send an ICMP Time-to-Live Exceeded</li>
            <li>The traceroute client on the source computer times out..</li>
            <li>Because there was no packet received with the routers IP as the source address, the source computer can not determine the IP address of router 1, therefore it marks the message as *
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The 2nd packet arrives at the router 1 with a destination of 10.10.0.10 </li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>Router 1 forwards the packet to computer 10.10.0.10
                <br>
                <br>
            </li>

            <li>The destination computer sends the reply to the source computer 192.168.0.10</li>
        </ol>

    <video class="afterglow" id="1_router_no-ttl-exceeded-message-due-to-busy-control-plane" height="540" width="640"  data-skin="light"
                            poster="videos/1_router_no-ttl-exceeded-message-due-to-busy-control-plane.png">
      <source type="video/ogg" src="videos/1_router_no-ttl-exceeded-message-due-to-busy-control-plane.ogg" />
      <source type="video/mp4" src="videos/1_router_no-ttl-exceeded-message-due-to-busy-control-plane.mp4" />
    </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; *
            <br> 2 &nbsp; 10.10.0.10 &nbsp; &nbsp; 4.0 ms
        </div>
        <br> Note: there is no delay in any of the packets passing <strong>through</strong> router 1.
1_router_no-ttl-exceeded-message-due-to-busy-control-plane.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example router 1 drops expired packets...
        <ol>
            <li>The source computer generates and sends a packet with the TTL set to 1 and a destination IP address of 10.10.0.10</li>
            <li>The 1st packet arrives at the router 1 with a destination of 10.10.0.10</li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>The 1st packet has now expired on router 1</li>
            <li>The control plane of Router 1 is too busy to generate and send an ICMP Time-to-Live Exceeded</li>
           <li>The traceroute client on the source computer times out..</li>
            <li>Because there was no packet received with the routers IP as the source address, the source computer can not determine the IP address of router 1, therefore it marks the message as *
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The 2nd packet arrives at the router 1 with a destination of 10.10.0.10 </li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>Router 1 forwards the packet to router 2</li>
            <li>Router 2 decrements the TTL by 1</li>
            <li>The 2nd packet has now expired on router 2</li>
            <li>Router 2 generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0)</li>
            <li>The message will have the routers 2 IP address as the source address</li>
            <li>Router 2 sends the message back to the original source IP
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 3 and a destination IP address of 10.10.0.10</li>
            <li>The 3rd packet arrives at router 1, TTL -1, forwarded to router 2, TTL -1, forwarded to destination computer 10.10.0.10</li>
            <li>The destination computer sends the reply to the source computer 192.168.0.10</li>
        </ol>
    <video class="afterglow" id="2_routers_no_ttl_exceeded_message_from_first_router_due_to_busy_control_plane" width="960" height="540" data-skin="light" 
                             poster="videos/2_routers_no_ttl_exceeded_message_from_first_router_due_to_busy_control_plane.png">
      <source type="video/ogg"  src="videos/2_routers_no_ttl_exceeded_message_from_first_router_due_to_busy_control_plane.ogg" />
      <source type="video/mp4"  src="videos/2_routers_no_ttl_exceeded_message_from_first_router_due_to_busy_control_plane.mp4" />
    </video>

        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; *
            <br> 2 &nbsp; 10.10.0.1 &nbsp; &nbsp; 4.0 ms
            <br> 3 &nbsp; 10.10.0.10 &nbsp; &nbsp;6.0 ms
            <br>
        </div>
        <br> Note: there is no delay in any of the packets passing <strong>through</strong> router 1.
    </div>
    



    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example there is a delay before the router can generate the ICMP Time-to-Live Exceeded message...
        <ol>
            <li>The source computer generates and sends a packet with the TTL set to 1 and a destination IP address of 10.10.0.10</li>
            <li>The 1st packet arrives at the router 1 with a destination of 10.10.0.10</li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>The 1st packet has now expired on router 1</li>
            <li>The control plane of Router 1 is busy and there is a delay while it completes other tasks (updating route tables, compressing log files etc..)</li>
            <li>Router 1 generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0)</li>
            <li>The message will have the router 1 IP address as the source address</li>
            <li>Router 1 sends the message back to the original source IP
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The 2nd packet arrives at the router 1 with a destination of 10.10.0.10 </li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>Router 1 forwards the packet to computer 10.10.0.10
                <br>
                <br>
            </li>

            <li>The destination computer sends the reply to the source computer 192.168.0.10</li>
        </ol>

    <video class="afterglow" id="1_router_delayed-ttl-exceeded-message-due-to-busy-control-plane" height="540" width="640"  data-skin="light"
                            poster="videos/1_router_delayed-ttl-exceeded-message-due-to-busy-control-plane.png">
      <source type="video/ogg" src="videos/1_router_delayed-ttl-exceeded-message-due-to-busy-control-plane.ogg" />
      <source type="video/mp4" src="videos/1_router_delayed-ttl-exceeded-message-due-to-busy-control-plane.mp4" />
     </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; &nbsp;30.0 ms
            <br> 2 &nbsp; 10.10.0.10 &nbsp; &nbsp; &nbsp;4.0 ms
            <br>
        </div>
        <br> Note: there is no delay in any of the packets passing <strong>through</strong> router 1.
1_router_delayed-ttl-exceeded-message-due-to-busy-control-plane.png
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        In this example .
        <ol>
            <li>The source computer generates and sends a packet with the TTL set to 1 and a destination IP address of 10.10.0.10</li>
            <li>The 1st packet arrives at the router 1 with a destination of 10.10.0.10</li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>The 1st packet has now expired on router 1</li>
            <li>The control plane of Router 1 is busy and there is a delay while it completes other tasks (such as updating route tables, compressing log files etc..)</li>
            <li>Router 1 generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0)</li>
            <li>The message will have the router 1 IP address as the source address</li>
            <li>Router 1 sends the message back to the original source IP
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 2 and a destination IP address of 10.10.0.10</li>
            <li>The 2nd packet arrives at the router 1 with a destination of 10.10.0.10 </li>
            <li>Router 1 decrements the TTL by 1</li>
            <li>Router 1 forwards the packet to router 2</li>
            <li>Router 2 decrements the TTL by 1</li>
            <li>The 2nd packet has now expired on router 2</li>
            <li>Router 2 generates an ICMP Time-to-Live Exceeded (Type 11), TTL equal 0 during transit (Code 0)</li>
            <li>The message will have the routers 2 IP address as the source address</li>
            <li>Router 2 sends the message back to the original source IP
                <br>
                <br>
            </li>

            <li>The source computer generates and sends a packet with the TTL set to 3 and a destination IP address of 10.10.0.10</li>
            <li>The 3rd packet arrives at router 1, TTL -1, forwarded to router 2, TTL -1, forwarded to destination computer 10.10.0.10</li>
            <li>The destination computer sends the reply to the source computer 192.168.0.10</li>
        </ol>
    <video class="afterglow" id="2_routers_delayed-ttl-exceeded-message-from-first-router-due-to-busy-control-plane" height="540" width="960"  data-skin="light"
                            poster="videos/2_routers_delayed-ttl-exceeded-message-from-first-router-due-to-busy-control-plane.png">
      <source type="video/ogg" src="videos/2_routers_delayed-ttl-exceeded-message-from-first-router-due-to-busy-control-plane.ogg" />
      <source type="video/mp4" src="videos/2_routers_delayed-ttl-exceeded-message-from-first-router-due-to-busy-control-plane.mp4" />
    </video>
        <div class="screen">
            $&gt; traceroute 10.10.0.10
            <br> 1 &nbsp; 192.168.0.1 &nbsp; 30.0 ms
            <br> 2 &nbsp; 10.10.0.1 &nbsp;&nbsp; &nbsp; 4.0 ms
            <br> 3 &nbsp; 10.10.0.10 &nbsp; &nbsp; 6.0 ms
            <br>
        </div>
        <br> Note: there is no delay in any of the packets passing <strong>through</strong> router 1.
2_routers_delayed-ttl-exceeded-message-from-first-router-due-to-busy-control-plane.mp4
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        <H3>Symetric Path</h3>
        Idealisic model of sysmetric paths between the two hosts (W) and (e).<br>
        <img src="images/asymetric-paths-imaginary.png" width="950">
    </div>


    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        <H3>Asymetric Path</h3>
        The return path is not the same as forward path between the two hosts (W) and (e).<br>
        <img src="images/asymetric-paths-from-both-sides.png" width="950">
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        <H3>Multiple Asymetric Paths</h3>
        <img src="images/traceroute-crt-term.png" width="500">
    <video class="afterglow" id="asymmetric_routing_paths" width="960" height="540" data-skin="light" 
                            poster="images/asymmetric_routing_paths.png">
      <source type="video/ogg" src="videos/asymmetric_routing_paths.ogg" />
      <source type="video/mp4" src="videos/asymmetric_routing_paths.mp4" />
    </video>

        <br>
        <br>
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        <img src="images/summary-of-divergent-paths-animation.png" width="950">
    </div>




    <div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
        <img src="images/summary-of-divergent-paths-animation-redacted.png" width="950">
    </div>


<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="images/cc-nc-icon.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.


<div style="width: 960px; color: black; background-color: #d9d9d9; border: 2px solid black; padding: 5px; margin: 20px;">
FAQ and extra stuff
<ul>
<li>https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol</li>
<li>https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol#Time_exceeded</li>
<li>https://en.wikipedia.org/wiki/Traceroute</li>
<li>https://en.wikipedia.org/wiki/Internet_Protocol</li>
<li>https://en.wikipedia.org/wiki/Transmission_Control_Protocol</li>
<li>https://en.wikipedia.org/wiki/Time_to_live</li>
<li>https://en.wikipedia.org/wiki/Ping_(networking_utility)</li>
<li>https://en.wikipedia.org/wiki/Van_Jacobson</li>
<li>https://tools.ietf.org/html/rfc1918</li>
</ul>

<ul>
<li>All drawing and animations assets were created with <a ref"Inkscape"  href="https://inkscape.org">Inkscape</a> </li>
<li>Animations were created with <a ref="Synfig" href="http://synfig.org">Synfig Studio</a> </li>
<li>HTML 5 video player used is <a ref="Video Player" href="https://afterglowplayer.com">After Glow Player<a/> </li>
</ul>

<ul>
<li><a ref="multipleIPs" href="images/1_router_with-2-IP-addresses.png">IP Routers have more than one IP address<a/> </li>
</ul>

<h3>ICMP Time exceeded message format</h3>
<table cellspacing="0" border="0">
	<colgroup span="2" width="85"></colgroup>
	<colgroup width="270"></colgroup>
	<tr>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" height="17" align="center">00     â€“     07</td>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" align="center">08     -      15</td>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" align="center">16                   -             31</td>
	</tr>
	<tr>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" height="17" align="center">Type = 11</td>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" align="center">Code = 0 / 1</td>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" align="center">Header Checksum</td>
	</tr>
	<tr>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" colspan=3 height="17" align="center">Not Used</td>
		</tr>
	<tr>
		<td style="border-top: 1px solid #000000; border-bottom: 1px solid #000000; border-left: 1px solid #000000; border-right: 1px solid #000000" colspan=3 height="17" align="center">IP header and first 64 bits of original datagram's data</td>
		</tr>
</table>

</div>
</body>

</html>
